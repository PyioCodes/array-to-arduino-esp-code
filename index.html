<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>OLED Static Code Generator</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #0f0f0f; color: #ffffff; padding: 20px; line-height: 1.6; }
        .container { max-width: 900px; margin: 0 auto; background: #1a1a1a; padding: 30px; border-radius: 12px; border: 1px solid #333; }
        h2 { color: #00d4ff; border-bottom: 2px solid #00d4ff; padding-bottom: 10px; margin-top: 0; }
        label { display: block; margin-bottom: 8px; font-weight: bold; color: #bbb; }
        textarea { width: 100%; height: 180px; background: #000; color: #00ff00; border: 1px solid #444; padding: 12px; font-family: 'Cascadia Code', 'Courier New', monospace; border-radius: 6px; margin-bottom: 20px; box-sizing: border-box; }
        .controls { display: flex; gap: 15px; align-items: center; margin-bottom: 25px; background: #252525; padding: 15px; border-radius: 8px; }
        select, button { padding: 12px 24px; border-radius: 5px; border: none; font-size: 14px; font-weight: bold; cursor: pointer; outline: none; }
        select { background: #333; color: #fff; border: 1px solid #444; }
        button { background: #00d4ff; color: #000; transition: background 0.2s; }
        button:hover { background: #0099bb; }
        #final-code { height: 400px; color: #ff9d00; border-color: #555; }
        .footer-link { margin-top: 20px; text-align: center; padding: 15px; background: #222; border-radius: 8px; }
        .footer-link a { color: #00d4ff; text-decoration: none; font-weight: bold; }
        .footer-link a:hover { text-decoration: underline; }
    </style>
</head>
<body>

<div class="container">
    <h2>OLED STATIC CODE GENERATOR</h2>
    
    <label>1. PASTE YOUR BITMAP ARRAY HERE:</label>
    <textarea id="array-input" placeholder="const unsigned char myBitmap [] PROGMEM = { ... };"></textarea>

    <div class="controls">
        <div style="flex-grow: 1;">
            <label>SELECT PLATFORM:</label>
            <select id="platform" style="width: 100%;">
                <option value="esp32">ESP32 (Default I2C: SDA 21, SCL 22)</option>
                <option value="arduino">Arduino (Standard I2C: A4/A5)</option>
            </select>
        </div>
        <button onclick="generateCode()" style="margin-top: 25px;">GENERATE SKETCH</button>
    </div>

    <label>2. READY-TO-USE ARDUINO CODE (SETUP ONLY):</label>
    <textarea id="final-code" readonly placeholder="Your generated code will appear here..."></textarea>

    <div class="footer-link">
        <p>Need to convert an image first? Use: <a href="https://javl.github.io/image2cpp/" target="_blank">image2cpp tool</a></p>
    </div>
</div>

<script>
function generateCode() {
    const arrayData = document.getElementById('array-input').value.trim();
    const platform = document.getElementById('platform').value;
    const finalCodeBox = document.getElementById('final-code');

    if(!arrayData.includes('0x')) {
        alert("Error: Please paste a valid Hex Array!");
        return;
    }

    let wireConfig = (platform === 'esp32') 
        ? "Wire.begin(21, 22);" 
        : "Wire.begin();";

    const sketch = `#include <Wire.h>
#include <Adafruit_GFX.h>
#include <Adafruit_SSD1306.h>

#define SCREEN_WIDTH 128
#define SCREEN_HEIGHT 64
#define OLED_RESET    -1
#define SCREEN_ADDRESS 0x3C

Adafruit_SSD1306 display(SCREEN_WIDTH, SCREEN_HEIGHT, &Wire, OLED_RESET);

${arrayData}

void setup() {
  ${wireConfig}
  
  if(!display.begin(SSD1306_SWITCHCAPVCC, SCREEN_ADDRESS)) {
    for(;;); 
  }

  display.clearDisplay();
  display.drawBitmap(0, 0, myBitmap, 128, 64, SSD1306_WHITE);
  display.display();
}

void loop() {
  // Static image - No loop logic required.
}
`;

    finalCodeBox.value = sketch;
}
</script>

</body>
</html>
