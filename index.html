<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>OLED Code Generator</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #121212; color: #e0e0e0; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; background: #1e1e1e; padding: 20px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.5); }
        textarea { width: 100%; height: 200px; background: #2d2d2d; color: #a6e22e; border: 1px solid #444; padding: 10px; font-family: monospace; border-radius: 5px; resize: vertical; }
        .controls { margin: 20px 0; display: flex; gap: 20px; align-items: center; }
        select, button { padding: 10px 15px; border-radius: 5px; border: none; cursor: pointer; }
        button { background: #007bff; color: white; font-weight: bold; }
        button:hover { background: #0056b3; }
        #final-code { height: 400px; margin-top: 20px; background: #000; color: #66d9ef; }
        label { font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h2>OLED Projesi İçin Kod Oluşturucu</h2>
    
    <label>1. Bitmap Array'ini Buraya Yapıştır (0x... ile başlayan kısım):</label>
    <textarea id="array-input" placeholder="const unsigned char myBitmap [] PROGMEM = { ... };"></textarea>

    <div class="controls">
        <div>
            <label>Platform:</label>
            <select id="platform">
                <option value="esp32">ESP32 (GPIO 21/22)</option>
                <option value="arduino">Arduino (A4/A5)</option>
            </select>
        </div>
        <button onclick="generateCode()">Kodu Oluştur (Perde Efektli)</button>
    </div>

    <label>2. Oluşturulan Arduino Sketch:</label>
    <textarea id="final-code" readonly></textarea>
</div>

<script>
function generateCode() {
    const arrayData = document.getElementById('array-input').value.trim();
    const platform = document.getElementById('platform').value;
    const finalCodeBox = document.getElementById('final-code');

    if(!arrayData.includes('0x')) {
        alert("Lütfen geçerli bir hex array yapıştırın!");
        return;
    }

    let setupConfig = (platform === 'esp32') 
        ? "  Wire.begin(21, 22); // ESP32 Standart SDA, SCL\n  Wire.setClock(400000);" 
        : "  // Arduino'da SDA=A4, SCL=A5 kullanılır\n  Wire.setClock(400000);";

    const fullCode = `#include <Wire.h>
#include <Adafruit_GFX.h>
#include <Adafruit_SSD1306.h>

#define SCREEN_WIDTH 128
#define SCREEN_HEIGHT 64
#define OLED_RESET    -1
#define SCREEN_ADDRESS 0x3C

Adafruit_SSD1306 display(SCREEN_WIDTH, SCREEN_HEIGHT, &Wire, OLED_RESET);

${arrayData}

void setup() {
${setupConfig}
  if(!display.begin(SSD1306_SWITCHCAPVCC, SCREEN_ADDRESS)) {
    for(;;);
  }
  display.clearDisplay();
  display.display();
}

void loop() {
  // 1. TAM KARANLIK (5 SANİYE)
  display.clearDisplay();
  display.display();
  delay(5000);

  // 2. PERDE EFEKTİ İLE AÇILIŞ
  for(int w = 0; w <= 128; w += 2) {
    display.clearDisplay();
    display.drawBitmap(0, 0, myBitmap, 128, 64, SSD1306_WHITE);
    display.fillRect(w, 0, 128 - w, 64, SSD1306_BLACK);
    display.display();
    delay(15);
  }

  // 3. GÖRÜNTÜ SABİTLEME (10 SANİYE)
  delay(10000);
}`;

    finalCodeBox.value = fullCode;
}
</script>

</body>
</html>
